<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Вика :)</title>
	<style>
		* { padding: 0; margin: 0; }
		canvas { background: #eee; display: block; margin: 0 auto; }
	</style>
</head>
<body>

<canvas id="gameCanvas" width="480" height="320"></canvas>

<script>
	var canvas = document.getElementById("gameCanvas");
	var ctx = canvas.getContext("2d");

	var generalCompliments = [
		"красивая", "милая", "сладкая",
		"вкусная", "умная", "сексуальная",
		"горячая", "хорошая", "заботливая",
		"понимающая", "чудесная", "волшебная"
	];
	var lookCompliments = [
		"красивые глаза", "прекрасные губы", "замечательные волосы",
		"великолепные брови", "завораживающая шея", "нежные руки", 
	];

	const IN_GAME_GENERAL_COMPLIMENTS_NUMBER = 4;
	const IN_GAME_LOOK_COMPLIMENTS_NUMBER = 2;

	function getInGameCompliments(complimentsSource, comlimentsNumber) {
		usedIndexes = [];
		compliments = [];
		var complimentPosition = 0;

		while (complimentPosition < comlimentsNumber) {
			var newComplimentPosition;
			do {
				newComplimentPosition = getRandomInt(0, complimentsSource.length);
			} while (usedIndexes.indexOf(newComplimentPosition) !== -1);
			usedIndexes.push(newComplimentPosition);
			complimentPosition++;
			compliments.push(complimentsSource[newComplimentPosition]);
		}

		return compliments;
	}

	function getRandomInt(min, max) {
		return Math.floor(Math.random() * (max - min)) + min;
	}

	var inGameGeneralCompliments = getInGameCompliments(generalCompliments, IN_GAME_GENERAL_COMPLIMENTS_NUMBER);
	var inGameLookCompliments = getInGameCompliments(lookCompliments, IN_GAME_LOOK_COMPLIMENTS_NUMBER);

	//Player START
	const PLAYER_WIDTH = 15;
	const PLAYER_HEIGHT = 15;

	const PLAYER_SPEED = 2;

	var playerXPosition = canvas.width / 2;
	var playerYPosition = canvas.height / 2;

	function drawPlayer() {
		ctx.beginPath();
		ctx.arc(playerXPosition, playerYPosition, PLAYER_WIDTH, 0, Math.PI * 2);
		ctx.fillStyle = "#0095DD";
		ctx.fill();
		ctx.closePath();
	}
	//Player END

	//Enemy START
	const ENEMIES_NUMBER = 4;
	const ENEMY_HEALTH = 3;
	const ENEMIES_START_POSITIONS = [
		{ xPosition: canvas.width / 4, yPosition: canvas.height / 4 },
		{ xPosition: canvas.width / 4 * 3, yPosition: canvas.height / 4 },
		{ xPosition: canvas.width / 4, yPosition: canvas.height / 4 * 3 },
		{ xPosition: canvas.width / 4 * 3, yPosition: canvas.height / 4 * 3 },
	];
	const ENEMY_RADIUS = 20;

	function buildEnemies(enemiesNumber) {
		var enemies = [];
		for (var enemyPosition = 0; enemyPosition < enemiesNumber; enemyPosition++) {
			enemies.push({ xPosition: 0, yPosition: 0, health: ENEMY_HEALTH });
		}

		return enemies;
	}

	function placeEnemies(enemies) {
		for (var enemyPosition = 0;
				 enemyPosition < enemies.length && enemyPosition < ENEMIES_START_POSITIONS.length;
				 enemyPosition++) {
			enemies[enemyPosition].xPosition = ENEMIES_START_POSITIONS[enemyPosition].xPosition;
			enemies[enemyPosition].yPosition = ENEMIES_START_POSITIONS[enemyPosition].yPosition;
		}
	}

	function drawEnemy(enemy) {
		ctx.beginPath();
		ctx.arc(enemy.xPosition, enemy.yPosition, ENEMY_RADIUS, 0, Math.PI * 2);
		ctx.fillStyle = "#FF0000";
		ctx.fill();
		ctx.closePath();
	}

	function drawEnemies(enemies) {
		for (var enemyPosition = 0; enemyPosition < enemies.length; enemyPosition++) {
			drawEnemy(enemies[enemyPosition]);
		}
	}

	var enemies = buildEnemies(ENEMIES_NUMBER);
	placeEnemies(enemies);
	//Enemy END

	//Bullet START
	//Bullet END

	//Controls START
	var upPressed;
	var downPressed;
	var leftPressed;
	var rightPressed;
	var spacePressed;

	const UP_KEY_CODE = 38;
	const DOWN_KEY_CODE = 40;
	const LEFT_KEY_CODE = 37;
	const RIGHT_KEY_CODE = 39;
	const SPACE_KEY_CODE = 32;

	function keyDownHandler(e) {
		switch (e.keyCode) {
			case UP_KEY_CODE:
				upPressed = true;
				break;
			case DOWN_KEY_CODE:
				downPressed = true;
				break;
			case LEFT_KEY_CODE:
				leftPressed = true;
				break;
			case RIGHT_KEY_CODE:
				rightPressed = true;
				break;
			case SPACE_KEY_CODE:
				spacePressed = true;
				break;
		}
	}

	function keyUpHandler(e) {
		switch (e.keyCode) {
			case UP_KEY_CODE:
				upPressed = false;
				break;
			case DOWN_KEY_CODE:
				downPressed = false;
				break;
			case LEFT_KEY_CODE:
				leftPressed = false;
				break;
			case RIGHT_KEY_CODE:
				rightPressed = false;
				break;
			case SPACE_KEY_CODE:
				spacePressed = false;
				break;
		}
	}

	document.addEventListener("keydown", keyDownHandler, false);
	document.addEventListener("keyup", keyUpHandler, false);
	//Controls END

	function clearCanvas() {
		ctx.clearRect(0, 0, canvas.width, canvas.height);
	}

	function draw() {
		clearCanvas();
		drawPlayer();
		drawEnemies(enemies);

		if (upPressed) {
			playerYPosition -= PLAYER_SPEED;
		}
		if (downPressed) {
			playerYPosition += PLAYER_SPEED;
		}
		if (leftPressed) {
			playerXPosition -= PLAYER_SPEED;
		}
		if (rightPressed) {
			playerXPosition += PLAYER_SPEED;
		}

		requestAnimationFrame(draw);
	}

	draw();
</script>

</body>
</html>